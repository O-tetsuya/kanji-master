<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¼¢å­—ãƒã‚¹ã‚¿ãƒ¼</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .app { max-width: 1000px; margin: 0 auto; }
        .header {
            background: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .title { font-size: 28px; color: #7c3aed; }
        .stars {
            background: #fef3c7;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 20px;
            font-weight: bold;
        }
        .main { background: white; padding: 30px; }
        .info { text-align: center; margin-bottom: 20px; color: #7c3aed; }
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        .box {
            border-radius: 15px;
            padding: 15px;
            position: relative;
            min-height: 150px;
            display: flex;
            flex-direction: column;
        }
        .box.tall { grid-row: span 2; min-height: 320px; }
        .label { font-size: 12px; font-weight: bold; margin-bottom: 10px; text-align: center; }
        .content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .text {
            font-weight: bold;
            color: white;
            text-align: center;
            padding: 10px;
            z-index: 5;
            position: relative;
        }
        .size-xl { font-size: 60px; }
        .size-lg { font-size: 28px; }
        .size-sm { font-size: 14px; line-height: 1.6; }
        .hint { opacity: 0.2; }
        canvas {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            touch-action: none;
            cursor: crosshair;
        }
        .clear-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 16px;
            z-index: 10;
        }
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            color: white;
        }
        .btn-red { background: #ef4444; }
        .btn-blue { background: #3b82f6; }
        .footer {
            background: white;
            padding: 20px;
            border-radius: 0 0 20px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav {
            padding: 12px 24px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            background: #3b82f6;
            color: white;
            cursor: pointer;
        }
        .nav:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }
        .counter { font-size: 18px; font-weight: bold; }
        .bg-green { background: linear-gradient(135deg, #86efac, #4ade80); }
        .bg-yellow { background: linear-gradient(135deg, #fde047, #facc15); }
        .bg-blue { background: linear-gradient(135deg, #93c5fd, #60a5fa); }
        .bg-purple { background: linear-gradient(135deg, #c084fc, #a855f7); }
        .bg-orange { background: linear-gradient(135deg, #fdba74, #fb923c); }
        .bg-green-light { background: linear-gradient(135deg, #bbf7d0, #86efac); }
        .bg-blue-light { background: linear-gradient(135deg, #bfdbfe, #93c5fd); }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <div class="title">ğŸ“š æ¼¢å­—ãƒã‚¹ã‚¿ãƒ¼</div>
            <div class="stars">â­ <span id="stars">0</span></div>
        </div>
        <div class="main">
            <div class="info">çœŸã‚“ä¸­ã®æ¼¢å­—ã‚’è¦‹ã¦ã€ã¾ã‚ã‚Šã®ãƒã‚¹ã«æ›¸ã„ã¦ã¿ã‚ˆã†ï¼</div>
            <div class="grid" id="grid"></div>
            <div class="buttons">
                <button class="btn btn-red" onclick="clearAll()">ğŸ—‘ï¸ å…¨éƒ¨æ¶ˆã™</button>
                <button class="btn btn-blue" onclick="toggleAnswer()" id="answerBtn">ğŸ‘ï¸ ç­”ãˆã‚’è¦‹ã‚‹ï¼</button>
            </div>
        </div>
        <div class="footer">
            <button class="nav" id="prev" onclick="prev()">â—€ ã¾ãˆã¸</button>
            <div class="counter" id="counter"></div>
            <button class="nav" id="next" onclick="next()">ã¤ãã¸ â–¶</button>
        </div>
    </div>

    <script>
        const data = [
            {k:'è©©',b:'è¨€',s:'13ç”»',o:'ã‚·',oe:'è©©ã‚’èª­ã‚“ã§æ¥½ã—ã¿ã¾ã—ãŸã€‚',u:'',ue:''},
            {k:'è‘‰',b:'è‰¹',s:'12ç”»',o:'ãƒ¨ã‚¦',oe:'æ¤ç‰©ã®è‘‰ã‚’é›†ã‚ã¦èª¿ã¹ã¾ã—ãŸã€‚',u:'ã¯',ue:'ç§‹ã«ãªã‚‹ã¨ã€æœ¨ã®è‘‰ãŒèµ¤ãè‰²ã¥ãã¾ã™ã€‚'},
            {k:'ç¿’',b:'ç¾½',s:'11ç”»',o:'ã‚·ãƒ¥ã‚¦',oe:'æ¯æ—¥å­¦ç¿’ã‚’ãŒã‚“ã°ã‚Šã¾ã™ã€‚',u:'ãªã‚‰(ã†)',ue:'ãƒ”ã‚¢ãƒã‚’ç¿’ã£ã¦ä¸Šæ‰‹ã«ãªã‚ŠãŸã„ã§ã™ã€‚'},
            {k:'ç™»',b:'ç™¶',s:'12ç”»',o:'ãƒˆã‚¦',oe:'å±±ç™»ã‚Šã‚’ã—ã¦ã€åºƒã„ä¸–ç•Œã‚’è¦‹ã¾ã—ãŸã€‚',u:'ã®ã¼(ã‚‹)',ue:'éšã ã‚“ã‚’ç™»ã£ã¦å±‹ä¸Šã«è¡Œãã¾ã—ãŸã€‚'},
            {k:'ç‰©',b:'ç‰›',s:'8ç”»',o:'ãƒ–ãƒ„',oe:'å‹•ç‰©åœ’ã§ãŸãã•ã‚“ã®å‹•ç‰©ã‚’è¦‹ã¾ã—ãŸã€‚',u:'ã‚‚ã®',ue:'éƒ¨å±‹ã«ã‚ã‚‹ã‚‚ã®ã‚’å…¨éƒ¨ã‹ãŸã¥ã‘ã¾ã—ãŸã€‚'},
            {k:'å•†',b:'å£',s:'11ç”»',o:'ã‚·ãƒ§ã‚¦',oe:'å•†åº—ã§ãŠè²·ã„ç‰©ã‚’ã—ã¾ã—ãŸã€‚',u:'ã‚ããª(ã†)',ue:'ãŠåº—ã§å•†ã„ã‚’ã—ã¦ã„ã¾ã™ã€‚'},
            {k:'é¤¨',b:'é£Ÿ',s:'16ç”»',o:'ã‚«ãƒ³',oe:'å›³æ›¸é¤¨ã§æœ¬ã‚’ã‹ã‚Šã¦èª­ã¿ã¾ã—ãŸã€‚',u:'ã‚„ã‹ãŸ',ue:'å¤ã„ã‚„ã‹ãŸã‚’è¦‹ã«è¡Œãã¾ã—ãŸã€‚'},
            {k:'é–‹',b:'é–€',s:'12ç”»',o:'ã‚«ã‚¤',oe:'é‹å‹•ä¼šã®é–‹ä¼šå¼ã§ã‚ã„ã•ã¤ã—ã¾ã—ãŸã€‚',u:'ã²ã‚‰(ã)',ue:'ãƒ‰ã‚¢ã‚’é–‹ã‘ã‚‹ã¨ã€æ˜ã‚‹ããªã‚Šã¾ã—ãŸã€‚'},
            {k:'å‹•',b:'åŠ›',s:'11ç”»',o:'ãƒ‰ã‚¦',oe:'é‹å‹•ã‚’ã™ã‚‹ã¨ä½“ãŒå…ƒæ°—ã«ãªã‚Šã¾ã™ã€‚',u:'ã†ã”(ã)',ue:'è»ŠãŒå‹•ã„ã¦èµ°ã£ã¦ã„ã¾ã™ã€‚'},
            {k:'å§‹',b:'å¥³',s:'8ç”»',o:'ã‚·',oe:'ã˜ã‚…æ¥­ã®å§‹ã¾ã‚Šã®æ™‚é–“ã‚’å®ˆã‚Šã¾ã™ã€‚',u:'ã¯ã˜(ã‚ã‚‹)',ue:'ä»Šæ—¥ã‹ã‚‰æ–°ã—ã„ã“ã¨ã‚’å§‹ã‚ã¾ã™ã€‚'},
            {k:'è¾',b:'è¾›',s:'13ç”»',o:'ã‚¸',oe:'å›½èªè¾ã¦ã‚“ã§æ„å‘³ã‚’èª¿ã¹ã¾ã™ã€‚',u:'ã‚„(ã‚ã‚‹)',ue:'å¤ã„ä»•äº‹ã‚’ã‚„ã‚ã¦æ–°ã—ã„ä»•äº‹ã‚’ã—ã¾ã™ã€‚'},
            {k:'èª¿',b:'è¨€',s:'15ç”»',o:'ãƒãƒ§ã‚¦',oe:'å›³æ›¸é¤¨ã§èª¿ã¹å­¦ç¿’ã‚’ã—ã¾ã—ãŸã€‚',u:'ã—ã‚‰(ã¹ã‚‹)',ue:'åˆ†ã‹ã‚‰ãªã„ã“ã¨ã‚’èª¿ã¹ã¾ã™ã€‚'},
            {k:'ç”±',b:'ç”°',s:'5ç”»',o:'ãƒ¦ã‚¦',oe:'ãŠãã‚ŒãŸç†ç”±ã‚’è©±ã—ã¾ã—ãŸã€‚',u:'ã‚ˆã—',ue:'åå‰ã®ã‚†æ¥ã‚’èª¿ã¹ã¾ã—ãŸã€‚'},
            {k:'æ„',b:'å¿ƒ',s:'13ç”»',o:'ã‚¤',oe:'å‹ã ã¡ã®æ„è¦‹ã‚’èã„ã¦è€ƒãˆã¾ã—ãŸã€‚',u:'',ue:''},
            {k:'å‘³',b:'å£',s:'8ç”»',o:'ãƒŸ',oe:'ã“ã®ã‚±ãƒ¼ã‚­ã¯ã‚ã¾ã„å‘³ãŒã—ã¾ã™ã€‚',u:'ã‚ã˜',ue:'ãŠæ¯ã•ã‚“ã®ä½œã£ãŸç‰©ã®å‘³ã¯ã•ã„é«˜ã§ã™ã€‚'},
            {k:'ä¼',b:'äºº',s:'6ç”»',o:'ãƒ‡ãƒ³',oe:'ä¼è¨€ã‚’å‹ã ã¡ã«ä¼ãˆã¾ã—ãŸã€‚',u:'ã¤ãŸ(ãˆã‚‹)',ue:'å¤§åˆ‡ãªã“ã¨ã‚’å®¶ããã«ä¼ãˆã¾ã™ã€‚'},
            {k:'é‰„',b:'é‡‘',s:'13ç”»',o:'ãƒ†ãƒ„',oe:'é‰„é“ã«ä¹—ã£ã¦æ—…è¡Œã—ã¾ã—ãŸã€‚',u:'',ue:''},
            {k:'éƒ¨',b:'é‚‘',s:'11ç”»',o:'ãƒ–',oe:'ã‚µãƒƒã‚«ãƒ¼éƒ¨ã§æ¯æ—¥ã‚Œã‚“ç¿’ã—ã¦ã„ã¾ã™ã€‚',u:'',ue:''},
            {k:'é…',b:'é…‰',s:'10ç”»',o:'ãƒã‚¤',oe:'æ–°èé…ãŸã¤ã®äººãŒæ¥ã¾ã—ãŸã€‚',u:'ãã°(ã‚‹)',ue:'ãƒ—ãƒªãƒ³ãƒˆã‚’é…ã£ã¦ã€ã¿ã‚“ãªã«ã‚ãŸã—ã¾ã—ãŸã€‚'},
            {k:'å…¨',b:'äºº',s:'6ç”»',o:'ã‚¼ãƒ³',oe:'å®‰å…¨ã«æ°—ã‚’ã¤ã‘ã¦é“ã‚’ã‚ãŸã‚Šã¾ã™ã€‚',u:'ã¾ã£ãŸ(ã)',ue:'ã—ã‚…ãã ã„ã‚’å…¨ãã‚„ã£ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚'},
            {k:'è«‡',b:'è¨€',s:'15ç”»',o:'ãƒ€ãƒ³',oe:'å…ˆç”Ÿã¨ãã†è«‡ã—ã¦ã€ãã‚ã¾ã—ãŸã€‚',u:'',ue:''},
            {k:'ç·‘',b:'ç³¸',s:'14ç”»',o:'ãƒªãƒ§ã‚¯',oe:'ç·‘è‰²ã®è‘‰ã£ã±ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚',u:'ã¿ã©ã‚Š',ue:'æ˜¥ã«ãªã‚‹ã¨ã€ç·‘ãŒãã‚Œã„ã§ã™ã€‚'},
            {k:'æ·±',b:'æ°´',s:'11ç”»',o:'ã‚·ãƒ³',oe:'æ·±å¤œã¾ã§ãŠãã¦ã„ãŸã®ã§ã€ã­ã‚€ã„ã§ã™ã€‚',u:'ãµã‹(ã„)',ue:'ã“ã®ãƒ—ãƒ¼ãƒ«ã¯æ·±ã„ã®ã§æ°—ã‚’ã¤ã‘ã¾ã™ã€‚'},
            {k:'æ„Ÿ',b:'å¿ƒ',s:'13ç”»',o:'ã‚«ãƒ³',oe:'ãˆã„ç”»ã‚’è¦‹ã¦ã€æ„Ÿå‹•ã—ã¾ã—ãŸã€‚',u:'',ue:''},
            {k:'æƒ³',b:'å¿ƒ',s:'13ç”»',o:'ã‚½ã‚¦',oe:'å¤ä¼‘ã¿ã®æ€ã„å‡ºã‚’ä½œæ–‡ã«æ›¸ãã¾ã—ãŸã€‚',u:'',ue:''},
            {k:'é¡Œ',b:'é ',s:'18ç”»',o:'ãƒ€ã‚¤',oe:'å•é¡ŒãŒã‚€ãšã‹ã—ãã¦ã€ã¨ã‘ã¾ã›ã‚“ã§ã—ãŸã€‚',u:'',ue:''},
            {k:'æ¨ª',b:'æœ¨',s:'15ç”»',o:'ã‚ªã‚¦',oe:'æ¨ªã ã‚“æ­©é“ã‚’ã‚ãŸã£ã¦å­¦æ ¡ã«è¡Œãã¾ã™ã€‚',u:'ã‚ˆã“',ue:'å‹ã ã¡ã®æ¨ªã«ã™ã‚ã£ã¦ã€è©±ã‚’ã—ã¾ã—ãŸã€‚'},
            {k:'è»½',b:'è»Š',s:'12ç”»',o:'ã‚±ã‚¤',oe:'è»½ã„è·ç‰©ã‚’æŒã£ã¦å‡ºã‹ã‘ã¾ã—ãŸã€‚',u:'ã‹ã‚‹(ã„)',ue:'ã“ã®ã¯ã“ã¯è»½ã„ã®ã§ã€ã‹ã‚“ãŸã‚“ã«é‹ã¹ã¾ã™ã€‚'},
            {k:'é‡',b:'é‡Œ',s:'9ç”»',o:'ã‚¸ãƒ¥ã‚¦',oe:'é‡è¦ãªã“ã¨ã‚’ãƒ¡ãƒ¢ã—ã¾ã™ã€‚',u:'ãŠã‚‚(ã„)',ue:'ã“ã®è·ç‰©ã¯é‡ã„ã®ã§ã€äºŒäººã§é‹ã³ã¾ã™ã€‚'},
            {k:'æœŸ',b:'æœˆ',s:'12ç”»',o:'ã‚­',oe:'ä»Šæ—¥ã‹ã‚‰æ–°å­¦æœŸãŒå§‹ã¾ã‚Šã¾ã™ã€‚',u:'',ue:''}
        ];

        let list = data.sort(() => Math.random() - 0.5);
        let idx = 0;
        let show = false;
        let star = 0;
        let cvs = {};
        let draw = false;
        let active = null;

        function render() {
            const d = list[idx];
            const g = document.getElementById('grid');
            g.innerHTML = `
                <div class="box bg-green">
                    <div class="label">è¨“èª­ã¿</div>
                    <div class="content">
                        <div class="text size-lg ${show?'':'hint'}" id="t1">${d.u||'ãªã—'}</div>
                        <canvas id="c1" width="140" height="140"></canvas>
                    </div>
                    <button class="clear-btn" onclick="clear('c1')">ğŸ—‘ï¸</button>
                </div>
                <div class="box bg-yellow">
                    <div class="label">éƒ¨é¦–</div>
                    <div class="content">
                        <div class="text size-lg ${show?'':'hint'}" id="t2">${d.b}</div>
                        <canvas id="c2" width="140" height="140"></canvas>
                    </div>
                    <button class="clear-btn" onclick="clear('c2')">ğŸ—‘ï¸</button>
                </div>
                <div class="box bg-blue">
                    <div class="label">éŸ³èª­ã¿</div>
                    <div class="content">
                        <div class="text size-lg ${show?'':'hint'}" id="t3">${d.o}</div>
                        <canvas id="c3" width="140" height="140"></canvas>
                    </div>
                    <button class="clear-btn" onclick="clear('c3')">ğŸ—‘ï¸</button>
                </div>
                <div class="box bg-green-light tall">
                    <div class="label">è¨“èª­ã¿ã®ä¾‹æ–‡</div>
                    <div class="content">
                        <div class="text size-sm ${show?'':'hint'}" id="t4">${d.ue||'ãªã—'}</div>
                        <canvas id="c4" width="140" height="300"></canvas>
                    </div>
                    <button class="clear-btn" onclick="clear('c4')">ğŸ—‘ï¸</button>
                </div>
                <div class="box bg-purple">
                    <div class="label"></div>
                    <div class="content">
                        <div class="text size-xl">${d.k}</div>
                    </div>
                </div>
                <div class="box bg-blue-light tall">
                    <div class="label">éŸ³èª­ã¿ã®ä¾‹æ–‡</div>
                    <div class="content">
                        <div class="text size-sm ${show?'':'hint'}" id="t5">${d.oe}</div>
                        <canvas id="c5" width="140" height="300"></canvas>
                    </div>
                    <button class="clear-btn" onclick="clear('c5')">ğŸ—‘ï¸</button>
                </div>
                <div class="box bg-orange">
                    <div class="label">ç”»æ•°</div>
                    <div class="content">
                        <div class="text size-lg ${show?'':'hint'}" id="t6">${d.s}</div>
                        <canvas id="c6" width="140" height="140"></canvas>
                    </div>
                    <button class="clear-btn" onclick="clear('c6')">ğŸ—‘ï¸</button>
                </div>
            `;
            
            ['c1','c2','c3','c4','c5','c6'].forEach(id => {
                const c = document.getElementById(id);
                cvs[id] = c;
                const ctx = c.getContext('2d');
                ctx.lineCap = 'round';
                ctx.lineWidth = 4;
                ctx.strokeStyle = '#333';
                
                c.onmousedown = c.ontouchstart = (e) => {
                    e.preventDefault();
                    const r = c.getBoundingClientRect();
                    const x = (e.touches?.[0]||e).clientX - r.left;
                    const y = (e.touches?.[0]||e).clientY - r.top;
                    ctx.beginPath();
                    ctx.moveTo(x,y);
                    draw = true;
                    active = id;
                };
                
                c.onmousemove = c.ontouchmove = (e) => {
                    if(!draw || active !== id) return;
                    e.preventDefault();
                    const r = c.getBoundingClientRect();
                    const x = (e.touches?.[0]||e).clientX - r.left;
                    const y = (e.touches?.[0]||e).clientY - r.top;
                    ctx.lineTo(x,y);
                    ctx.stroke();
                };
                
                c.onmouseup = c.onmouseleave = c.ontouchend = () => {
                    draw = false;
                    active = null;
                };
            });
            
            update();
        }

        function update() {
            document.getElementById('counter').textContent = `${idx+1} / ${list.length}`;
            document.getElementById('prev').disabled = idx === 0;
            document.getElementById('next').disabled = idx === list.length-1;
            document.getElementById('stars').textContent = star;
        }

        function clear(id) {
            const c = cvs[id];
            const ctx = c.getContext('2d');
            ctx.clearRect(0, 0, c.width, c.height);
        }

        function clearAll() {
            Object.keys(cvs).forEach(clear);
        }

        function toggleAnswer() {
            show = !show;
            if(show) star++;
            ['t1','t2','t3','t4','t5','t6'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.className = el.className.replace('hint','') + (show?'':' hint');
            });
            document.getElementById('answerBtn').textContent = show ? 'ğŸ‘ï¸ ç­”ãˆã‚’éš ã™' : 'ğŸ‘ï¸ ç­”ãˆã‚’è¦‹ã‚‹ï¼';
            update();
        }

        function next() {
            if(idx < list.length-1) {
                idx++;
                show = false;
                render();
            }
        }

        function prev() {
            if(idx > 0) {
                idx--;
                show = false;
                render();
            }
        }

        render();
    </script>
</body>
</html>
